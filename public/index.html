<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üé∞ Acceso VIP Exclusivo</title>
  <meta name="description" content="Super bono exclusivo para nuevos usuarios. ¬°Solic√≠talo ahora por WhatsApp!" />
  <meta property="og:title" content="Acceso VIP - Bono Especial" />
  <meta property="og:image" content="bonus.png" />
  <link rel="stylesheet" href="/style.css" />
  <link rel="icon" href="/favicon.ico" />
</head>
<body>
  <!-- Banner de oferta por tiempo limitado -->
  <div class="offer-banner">
    ¬°OFERTA POR TIEMPO LIMITADO!
  </div>

  <div class="container">
    <div class="logo">
      <img src="/logo.png" alt="Casino VIP" onerror="this.style.display='none'" />
    </div>
    
    <h1>ACCESO VIP EXCLUSIVO</h1>
    
    <div class="bonus">
      ¬°SUPER BONO EN TU PRIMER DEP√ìSITO!
    </div>
    
    <div class="highlight">
      RETIROS TODO EL D√çA
    </div>
    
    <p class="cta">Escribinos apretando el bot√≥n de abajo</p>
    
    <a id="whatsapp-btn" href="https://wa.me/5491125469875&text=Hola!%20quiero%20un%20usuario" target="_blank">
      <img src="/whatsapp-icon.png" alt="WhatsApp" class="icon" />
      OBTENER MI BONO AHORA
    </a>
  </div>

  <script>
    const META_PIXEL_ID = 'TU_PIXEL_ID'; // Cambia esto en vercel.json/env
    const ACCESS_TOKEN = 'TU_ACCESS_TOKEN'; // Configurado en backend/.env

    function getCookie(name) {
      const v = `; ${document.cookie}`;
      const parts = v.split(`; ${name}=`);
      if (parts.length === 2) return parts.pop().split(';').shift();
    }

    function sendMetaEvent() {
      const eventId = 'ev_' + Date.now();
      fbq('track', 'Lead', { value: 1.0, currency: 'USD' }, { eventID: eventId });

      const body = {
        event_name: 'Lead',
        event_id: eventId,
        fbp: getCookie('_fbp') || '',
        fbc: getCookie('_fbc') || '',
        user_agent: navigator.userAgent,
        event_time: Math.floor(Date.now() / 1000),
        event_source_url: window.location.href,
        currency: 'USD',
        value: 1.0
      };

      fetch('/api/facebook-conversion', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(body)
      })
        .then(res => res.json())
        .then(res => console.log('Evento enviado:', res))
        .catch(err => console.error('Error al enviar evento:', err));
    }

    document.getElementById('whatsapp-btn').addEventListener('click', function (e) {
      sendMetaEvent();
    });

    // Protecci√≥n anti-copia b√°sica
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.addEventListener('keydown', e => {
      if (e.ctrlKey && ['c', 'v', 'u'].includes(e.key)) e.preventDefault();
    });

    // Generar part√≠culas doradas
    function createSparkle() {
      const sparkle = document.createElement('div');
      sparkle.className = 'sparkle';
      sparkle.style.left = Math.random() * 100 + '%';
      sparkle.style.animationDelay = Math.random() * 3 + 's';
      sparkle.style.animationDuration = (Math.random() * 3 + 4) + 's';
      document.body.appendChild(sparkle);
      
      setTimeout(() => {
        sparkle.remove();
      }, 8000);
    }

    // Crear part√≠culas cada 500ms
    setInterval(createSparkle, 500);
  </script>

  <!-- Meta Pixel -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', 'TU_PIXEL_ID');
    fbq('track', 'PageView');
  </script>
</body>
</html>
